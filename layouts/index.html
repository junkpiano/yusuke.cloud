{{- define "main" -}}

{{- /* Render the portfolio page as the site homepage. */ -}}
{{- $p := site.GetPage "page" "portfolio/index" -}}
{{- if not $p -}}
  {{- /* Fallback for older Hugo content lookup behavior. */ -}}
  {{- $p = site.GetPage "portfolio/index" -}}
{{- end -}}

{{- if $p -}}
  {{- partial "portfolio/main.html" $p -}}
{{- else -}}
  <article class="post-single">
    <header class="post-header">
      <h1 class="post-title">Home</h1>
    </header>
    <div class="post-content">
      <p>Portfolio page not found. Expected a page at <code>content/&lt;lang&gt;/portfolio/index.md</code>.</p>
    </div>
  </article>
{{- end -}}

{{- end -}}

